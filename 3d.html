<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3D E-Bike Customizer</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background: #222;
      color: white;
      padding: 20px;
      font-size: 24px;
    }
    select, label {
      margin: 10px;
      padding: 5px;
      font-size: 16px;
    }
    model-viewer {
      width: 100%;
      max-width: 800px;
      height: 500px;
      margin: 20px auto;
    }
  </style>
</head>
<body>

  <header>3D E-Bike Customizer</header>

  <div>
    <label>Brand:
      <select id="brand" onchange="updateModelOptions()">
        <option value="Macfox">Macfox</option>
        <!-- Add other brands here -->
      </select>
    </label>

    <label>Model:
      <select id="model" onchange="updateModel()">
        <option value="x1">X1</option>
      </select>
    </label>

    <label>Seat Cover:
      <select id="seatCover" onchange="updateModel()">
        <option value="none">None</option>
        <option value="seatcover">Guts Racing Seat Cover</option>
      </select>
    </label>

    <label>ODI Plate:
      <select id="odiPlate" onchange="updateModel()">
        <option value="none">None</option>
        <option value="odi">ODI Plate</option>
      </select>
    </label>
  </div>

  <model-viewer id="bikeViewer"
    alt="3D Bike Model"
    src=""
    shadow-intensity="1"
    camera-controls
    auto-rotate
    ar>
  </model-viewer>

  <script>
    function updateModel() {
      const model = document.getElementById("model").value;
      const seatCover = document.getElementById("seatCover").value;
      const odiPlate = document.getElementById("odiPlate").value;

      let fileName = `macfox-${model}`;
      if (seatCover !== "none") fileName += `-${seatCover}`;
      if (odiPlate !== "none") fileName += `-${odiPlate}`;

      document.getElementById("bikeViewer").src = `models/${fileName}.glb`;
    }

    function updateModelOptions() {
      const brand = document.getElementById("brand").value;
      const modelSelect = document.getElementById("model");
      modelSelect.innerHTML = "";

      if (brand === "Macfox") {
        ["x1"].forEach(m => {
          const opt = document.createElement("option");
          opt.value = m;
          opt.text = m.toUpperCase();
          modelSelect.appendChild(opt);
        });
      }

      updateModel();
    }

    window.onload = updateModelOptions;
  </script>

</body>
</html>
